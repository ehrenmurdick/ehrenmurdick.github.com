<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>File: Rakefile [Color -- Colour Management with Ruby]</title>

  <link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet" />

  <script src="./js/jquery.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/thickbox-compressed.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript"
    charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript"
    charset="utf-8"></script>
</head>

<body class="file">
  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="./History_txt.html">History.txt</a></li>
        
          <li class="file"><a href="./Install_txt.html">Install.txt</a></li>
        
          <li class="file"><a href="./Licence_txt.html">Licence.txt</a></li>
        
          <li class="file"><a href="./Manifest_txt.html">Manifest.txt</a></li>
        
          <li class="file"><a href="./README_txt.html">README.txt</a></li>
        
          <li class="file"><a href="./Rakefile.html">Rakefile</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="./Color.html">Color</a></li>
        
          <li><a href="./Color/CMYK.html">Color::CMYK</a></li>
        
          <li><a href="./Color/CSS.html">Color::CSS</a></li>
        
          <li><a href="./Color/GrayScale.html">Color::GrayScale</a></li>
        
          <li><a href="./Color/GrayScale.html">Color::GreyScale</a></li>
        
          <li><a href="./Color/HSL.html">Color::HSL</a></li>
        
          <li><a href="./Color/Palette.html">Color::Palette</a></li>
        
          <li><a href="./Color/Palette/AdobeColor.html">Color::Palette::AdobeColor</a></li>
        
          <li><a href="./Color/Palette/Gimp.html">Color::Palette::Gimp</a></li>
        
          <li><a href="./Color/Palette/MonoContrast.html">Color::Palette::MonoContrast</a></li>
        
          <li><a href="./Color/RGB.html">Color::RGB</a></li>
        
          <li><a href="./Color/RGB/Metallic.html">Color::RGB::Metallic</a></li>
        
          <li><a href="./Color/YIQ.html">Color::YIQ</a></li>
        
          <li><a href="./TestColor.html">TestColor</a></li>
        
          <li><a href="./TestColor/TestCMYK.html">TestColor::TestCMYK</a></li>
        
          <li><a href="./TestColor/TestCSS.html">TestColor::TestCSS</a></li>
        
          <li><a href="./TestColor/TestColor.html">TestColor::TestColor</a></li>
        
          <li><a href="./TestColor/TestGrayScale.html">TestColor::TestGrayScale</a></li>
        
          <li><a href="./TestColor/TestHSL.html">TestColor::TestHSL</a></li>
        
          <li><a href="./TestColor/TestPalette.html">TestColor::TestPalette</a></li>
        
          <li><a href="./TestColor/TestPalette/TestAdobeColor.html">TestColor::TestPalette::TestAdobeColor</a></li>
        
          <li><a href="./TestColor/TestPalette/TestGimp.html">TestColor::TestPalette::TestGimp</a></li>
        
          <li><a href="./TestColor/TestPalette/TestMonoContrast.html">TestColor::TestPalette::TestMonoContrast</a></li>
        
          <li><a href="./TestColor/TestRGB.html">TestColor::TestRGB</a></li>
        
          <li><a href="./TestColor/TestYIQ.html">TestColor::TestYIQ</a></li>
        
          <li><a href="./ConfigTable.html">ConfigTable</a></li>
        
          <li><a href="./ConfigTable/BoolItem.html">ConfigTable::BoolItem</a></li>
        
          <li><a href="./ConfigTable/ExecItem.html">ConfigTable::ExecItem</a></li>
        
          <li><a href="./ConfigTable/Item.html">ConfigTable::Item</a></li>
        
          <li><a href="./ConfigTable/MetaConfigEnvironment.html">ConfigTable::MetaConfigEnvironment</a></li>
        
          <li><a href="./ConfigTable/PackageSelectionItem.html">ConfigTable::PackageSelectionItem</a></li>
        
          <li><a href="./ConfigTable/PathItem.html">ConfigTable::PathItem</a></li>
        
          <li><a href="./ConfigTable/ProgramItem.html">ConfigTable::ProgramItem</a></li>
        
          <li><a href="./ConfigTable/SelectItem.html">ConfigTable::SelectItem</a></li>
        
          <li><a href="./Errno.html">Errno</a></li>
        
          <li><a href="./Errno/ENOTEMPTY.html">Errno::ENOTEMPTY</a></li>
        
          <li><a href="./Installer.html">Installer</a></li>
        
          <li><a href="./Installer/Shebang.html">Installer::Shebang</a></li>
        
          <li><a href="./Enumerable.html">Enumerable</a></li>
        
          <li><a href="./File.html">File</a></li>
        
          <li><a href="./FileOperations.html">FileOperations</a></li>
        
          <li><a href="./HookScriptAPI.html">HookScriptAPI</a></li>
        
          <li><a href="./Object.html">Object</a></li>
        
          <li><a href="./SetupError.html">SetupError</a></li>
        
          <li><a href="./ToplevelInstaller.html">ToplevelInstaller</a></li>
        
          <li><a href="./ToplevelInstallerMulti.html">ToplevelInstallerMulti</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    
<p>#! /usr/bin/env rake #– # <a href="Color.html">Color</a> # Colour
Management with Ruby # <a
href="http://rubyforge.org/projects/color">rubyforge.org/projects/color</a>
# # Licensed under a MIT-style licence. See <a
href="Licence_txt.html">Licence.txt</a> in the main # distribution for full
licensing information. # # Copyright © 2005 - 2010 Austin Ziegler and Matt
Lyon #++</p>

<p>require ‘rubygems’ require ‘hoe’</p>

<p>$LOAD_PATH.unshift(‘lib’)</p>

<p>require ‘color’</p>

<p>PKG_NAME    = ‘color’ PKG_VERSION = Color::COLOR_VERSION PKG_DIST    =
“#{PKG_NAME}-#{PKG_VERSION}” PKG_TAR     = “pkg/#{PKG_DIST}.tar.gz”
MANIFEST    = <a href="File.html#method-c-read">File.read</a>(“<a
href="Manifest_txt.html">Manifest.txt</a>”).split</p>

<p>Hoe.spec PKG_NAME do</p>

<pre>self.version = PKG_VERSION</pre>

<p># self.rubyforge_name = PKG_NAME</p>

<pre>developer &quot;Austin Ziegler&quot;, &quot;austin@rubyforge.org&quot; 
developer &quot;Matt Lyon&quot;, &quot;matt@postsomnia.com&quot; 

self.url = %W(http://color.rubyforge.org/ http://github.com/halostatue/color)

self.summary = &quot;Colour management with Ruby&quot;
self.changes = paragraphs_of(&quot;History.txt&quot;, 0..1).join(&quot;\n\n&quot;)
self.description = paragraphs_of(&quot;README.txt&quot;, 1..1).join(&quot;\n\n&quot;)

extra_dev_deps &lt;&lt; [ &quot;archive-tar-minitar&quot;, &quot;~&gt;0.5.1&quot; ]
clean_globs &lt;&lt; &quot;coverage&quot;

# This is a lie because I will continue to use Archive::Tar::Minitar.
self.need_tar        = false</pre>

<p>end</p>

<p>desc “Build a <a href="Color.html">Color</a> .tar.gz distribution.”
task :tar =&gt; [ PKG_TAR ] file PKG_TAR =&gt; [ :test ] do |t|</p>

<pre>require 'archive/tar/minitar'
require 'zlib'
files = MANIFEST.map { |f|
  fn = File.join(PKG_DIST, f)
  tm = File.stat(f).mtime

  if File.directory?(f)
    { :name =&gt; fn, :mode =&gt; 0755, :dir =&gt; true, :mtime =&gt; tm }
  else
    mode = if f =~ %r{^bin}
             0755
           else
             0644
           end
    data = File.read(f)
    { :name =&gt; fn, :mode =&gt; mode, :data =&gt; data, :size =&gt; data.size,
      :mtime =&gt; tm }
  end
}

begin
  unless File.directory?(File.dirname(t.name))
    require 'fileutils'
    File.mkdir_p File.dirname(t.name)
  end
  tf = File.open(t.name, 'wb')
  gz = Zlib::GzipWriter.new(tf)
  tw = Archive::Tar::Minitar::Writer.new(gz)

  files.each do |entry|
    if entry[:dir]
      tw.mkdir(entry[:name], entry)
    else
      tw.add_file_simple(entry[:name], entry) { |os|
        os.write(entry[:data])
      }
    end
  end
ensure
  tw.close if tw
  gz.close if gz
end</pre>

<p>end task :package =&gt; [ PKG_TAR ]</p>

<p>desc “Build the manifest file from the current set of files.” task
:build_manifest do |t|</p>

<pre>require 'find'

paths = []
Find.find(&quot;.&quot;) do |path|
  next if File.directory?(path)
  next if path =~ /\.svn/
  next if path =~ /\.git/
  next if path =~ /\.hoerc/
  next if path =~ /\.swp$/
  next if path =~ %r{coverage/}
  next if path =~ /~$/
  paths &lt;&lt; path.sub(%r{^\./}, '')
end

File.open(&quot;Manifest.txt&quot;, &quot;w&quot;) do |f|
  f.puts paths.sort.join(&quot;\n&quot;)
end

puts paths.sort.join(&quot;\n&quot;)</pre>

<p>end</p>

  </div>

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>
</body>
</html>

